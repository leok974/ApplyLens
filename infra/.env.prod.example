# Production Environment Configuration for applylens.app
# Copy this file to .env.prod and configure with actual production values

# =============================================================================
# DOMAIN & URLS
# =============================================================================
DOMAIN=applylens.app
SITE_BASE_URL=https://applylens.app
API_URL=https://applylens.app
VITE_API_URL=https://applylens.app
WEB_URL=https://applylens.app/web
PUBLIC_API_ORIGIN=https://applylens.app

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
POSTGRES_USER=applylens_prod
POSTGRES_PASSWORD=<GENERATE_STRONG_PASSWORD_MIN_32_CHARS>
POSTGRES_DB=applylens_production
DATABASE_URL=postgresql://applylens_prod:<GENERATE_STRONG_PASSWORD_MIN_32_CHARS>@db:5432/applylens_production

# =============================================================================
# SERVICE PORTS (internal Docker network)
# =============================================================================
API_PORT=8003
WEB_PORT=5175

# =============================================================================
# ELASTICSEARCH CONFIGURATION
# =============================================================================
ES_ENABLED=true
ES_URL=http://es:9200
KIBANA_PORT=5601
ES_RECREATE_ON_START=false  # NEVER true in production!
ELASTICSEARCH_INDEX=gmail_emails_prod
ES_JAVA_OPTS=-Xms1g -Xmx1g

# =============================================================================
# GMAIL OAUTH CONFIGURATION
# =============================================================================
GOOGLE_CREDENTIALS=/secrets/google.json
GOOGLE_OAUTH_SCOPES=https://www.googleapis.com/auth/gmail.readonly https://www.googleapis.com/auth/userinfo.email openid

# Generate with: openssl rand -hex 32
OAUTH_STATE_SECRET=<GENERATE_WITH_OPENSSL_RAND_HEX_32>

# Google OAuth Client Credentials (from Google Cloud Console)
GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-client-secret

# OAuth Redirect URIs - PRODUCTION
GOOGLE_REDIRECT_URI=https://applylens.app/auth/google/callback
OAUTH_REDIRECT_URI=https://applylens.app/auth/google/callback

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
CORS_ALLOW_ORIGINS=https://applylens.app,https://www.applylens.app
CORS_ALLOW_CREDENTIALS=true

# =============================================================================
# SECURITY
# =============================================================================
# Generate with: openssl rand -base64 32
SECRET_KEY=<GENERATE_WITH_OPENSSL_RAND_BASE64_32>
SESSION_SECRET=<GENERATE_WITH_OPENSSL_RAND_BASE64_32>

# Default admin user
DEFAULT_USER_EMAIL=admin@applylens.app

# Cookie Configuration for Production
COOKIE_DOMAIN=.applylens.app
COOKIE_SECURE=true
COOKIE_SAMESITE=lax

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=<GENERATE_STRONG_PASSWORD>
PROMETHEUS_RETENTION=30d
ENABLE_METRICS=true
LOG_LEVEL=INFO
API_LOG_LEVEL=INFO

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================
GUNICORN_WORKERS=4
GUNICORN_TIMEOUT=120
GUNICORN_KEEPALIVE=5
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10

# =============================================================================
# FEATURE FLAGS
# =============================================================================
ENABLE_SIGNUP=false
ENABLE_API_DOCS=true
ENABLE_SWAGGER_UI=true

# =============================================================================
# ENVIRONMENT
# =============================================================================
ENVIRONMENT=production
NODE_ENV=production
PYTHON_ENV=production
COMPOSE_PROJECT_NAME=applylens-prod

# =============================================================================
# GENERATION COMMANDS
# =============================================================================
# Use these commands to generate secure secrets:
#
# OAUTH_STATE_SECRET:
#   openssl rand -hex 32
#
# SECRET_KEY & SESSION_SECRET:
#   openssl rand -base64 32
#
# Strong Password:
#   openssl rand -base64 24
#
# =============================================================================
# ENABLE_ANALYTICS=true
# ENABLE_ML_PREDICTIONS=true
# ENABLE_NOTIFICATIONS=true

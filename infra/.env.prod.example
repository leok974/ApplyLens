# Production Environment Configuration for applylens.app
# Copy this file to .env.prod and configure with actual production values

# Database Configuration
POSTGRES_USER=postgres
POSTGRES_PASSWORD=<GENERATE_STRONG_PASSWORD>
POSTGRES_DB=applylens

# Service Ports (internal Docker network)
API_PORT=8000
WEB_PORT=5173

# Elasticsearch Configuration
ES_ENABLED=true
ES_URL=http://es:9200
KIBANA_PORT=5601
ES_RECREATE_ON_START=false  # NEVER true in production!

# Gmail OAuth Configuration
GOOGLE_CREDENTIALS=/secrets/google.json
GOOGLE_OAUTH_SCOPES=https://www.googleapis.com/auth/gmail.readonly https://www.googleapis.com/auth/userinfo.email openid
OAUTH_STATE_SECRET=<GENERATE_RANDOM_32_CHAR_STRING>
OAUTH_REDIRECT_URI=https://api.applylens.app/auth/google/callback

# Elasticsearch Index
ELASTICSEARCH_INDEX=gmail_emails

# ============================================================================
# Brand-Correct Production URLs (applylens.app)
# ============================================================================

# Site Base URL - Used for canonical URLs, sitemap generation
SITE_BASE_URL=https://applylens.app

# Public API Origin - Used by frontend to make API calls
PUBLIC_API_ORIGIN=https://api.applylens.app

# CORS Allowed Origins - Comma-separated list of allowed origins
# Must include all domains that will make requests to the API
CORS_ALLOW_ORIGINS=https://applylens.app,https://www.applylens.app

# Cookie Configuration for Production
COOKIE_DOMAIN=.applylens.app     # Allows cookies to be shared across subdomains
COOKIE_SECURE=1                   # Requires HTTPS (enforced by Cloudflare)
COOKIE_SAMESITE=lax              # Protects against CSRF while allowing top-level navigation

# Optional: Additional Security Headers
# Uncomment if implementing CSP or other security policies
# CSP_CONNECT_SRC=https://api.applylens.app
# CSP_FRAME_ANCESTORS=none
# HSTS_MAX_AGE=31536000

# ============================================================================
# Email Configuration (if using outbound email)
# ============================================================================
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=noreply@applylens.app
# SMTP_PASSWORD=<APP_SPECIFIC_PASSWORD>
# SMTP_FROM=ApplyLens <noreply@applylens.app>

# ============================================================================
# Monitoring & Observability
# ============================================================================
# SENTRY_DSN=https://...@sentry.io/...
# LOG_LEVEL=INFO
# METRICS_ENABLED=true

# ============================================================================
# Feature Flags
# ============================================================================
# ENABLE_ANALYTICS=true
# ENABLE_ML_PREDICTIONS=true
# ENABLE_NOTIFICATIONS=true

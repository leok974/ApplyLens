{"dashboard":{"annotations":{"list":[]},"editable":true,"fiscalYearStartMonth":1,"graphTooltip":0,"links":[],"liveNow":false,"panels":[{"type":"stat","title":"API Up","gridPos":{"h":4,"w":4,"x":0,"y":0},"options":{"reduceOptions":{"calcs":["lastNotNull"],"values":false},"colorMode":"value","graphMode":"none"},"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROM}"},"expr":"sum(up{job=\"applylens-api\"})"}]},{"type":"timeseries","title":"Requests per second (all)","gridPos":{"h":8,"w":12,"x":4,"y":0},"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROM}"},"expr":"sum(rate(http_requests_total{job=\"applylens-api\"}[5m]))"}],"options":{"legend":{"showLegend":true}}},{"type":"timeseries","title":"4xx/5xx rate","gridPos":{"h":8,"w":8,"x":16,"y":0},"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROM}"},"expr":"sum(rate(http_requests_total{job=\"applylens-api\",code=~\"4..\"}[5m]))","legendFormat":"4xx"},{"datasource":{"type":"prometheus","uid":"${DS_PROM}"},"expr":"sum(rate(http_requests_total{job=\"applylens-api\",code=~\"5..\"}[5m]))","legendFormat":"5xx"}]},{"type":"timeseries","title":"429s (rate limited)","gridPos":{"h":8,"w":12,"x":0,"y":8},"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROM}"},"expr":"sum(rate(applylens_rate_limit_exceeded_total[5m]))"}]},{"type":"timeseries","title":"CSRF & Captcha failures","gridPos":{"h":8,"w":12,"x":12,"y":8},"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROM}"},"expr":"sum(rate(applylens_csrf_fail_total[5m]))","legendFormat":"CSRF fails"},{"datasource":{"type":"prometheus","uid":"${DS_PROM}"},"expr":"sum(rate(applylens_recaptcha_verify_total{status=\"fail\"}[5m]))","legendFormat":"Captcha fails"}]},{"type":"timeseries","title":"HTTP latency p95 (placeholder)","description":"If you export request duration histograms, change to your metric (e.g., http_server_requests_seconds_bucket).","gridPos":{"h":8,"w":24,"x":0,"y":16},"targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROM}"},"expr":"histogram_quantile(0.95, sum by (le) (rate(http_request_duration_seconds_bucket{job=\"applylens-api\"}[5m])))"}]}],"refresh":"30s","schemaVersion":39,"style":"dark","tags":["applylens","traffic"],"templating":{"list":[{"name":"DS_PROM","type":"datasource","query":"prometheus","current":{"selected":true}}]},"time":{"from":"now-6h","to":"now"},"timezone":"browser","title":"ApplyLens â€” Traffic","version":1},"overwrite":true}

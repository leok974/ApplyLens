# UI Polish - Quick Reference Card

## ğŸ¨ Impact-Ordered Labels

### Visual Hierarchy
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Search Results for "interview"      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Google Software Engineer        â”‚ â”‚
â”‚ â”‚ recruiter@google.com            â”‚ â”‚
â”‚ â”‚                    [Offer] â†â”€â”€ Yellow, highest â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Meta Interview Invitation       â”‚ â”‚
â”‚ â”‚ jobs@meta.com                   â”‚ â”‚
â”‚ â”‚                 [Interview] â†â”€â”€ Green, important â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Amazon Application Received     â”‚ â”‚
â”‚ â”‚ noreply@amazon.com              â”‚ â”‚
â”‚ â”‚              [Application] â†â”€â”€ Blue, neutral â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Thanks for Applying             â”‚ â”‚
â”‚ â”‚ hr@company.com                  â”‚ â”‚
â”‚ â”‚               [Rejection] â†â”€â”€ Gray, de-emphasized â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ Recency Scale Selector (Settings)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Settings                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Search Scoring                       â”‚
â”‚                                      â”‚
â”‚ Recency Scale:                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â—‹ 3 days (more freshness)        â”‚ â”‚
â”‚ â”‚ â— 7 days (balanced) - Default    â”‚ â”‚ â† Selected
â”‚ â”‚ â—‹ 14 days (more recall)          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚
â”‚ Current Scoring Weights:             â”‚
â”‚ â€¢ Offer:      4.0Ã— (highest)        â”‚
â”‚ â€¢ Interview:  3.0Ã—                  â”‚
â”‚ â€¢ Others:     1.0Ã—                  â”‚
â”‚ â€¢ Rejection:  0.5Ã— (de-emphasized)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Scoring Hint (Search Header)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Results (42) for "interview google"                        â”‚
â”‚ Scoring: offer^4 â€¢ interview^3 â€¢ rejection^0.5 â€¢          â”‚
â”‚          Recency: 7-day decay (gauss scale=7d, decay=0.5) â€¢â”‚
â”‚          Scale: 7d                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¨ Label Color Palette

```css
Offer (Yellow - Highest Priority)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ bg-yellow-100  â”‚  Soft yellow background
â”‚ ring-yellow-300â”‚  Darker yellow border
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Interview (Green - Important)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ bg-green-100   â”‚  Soft green background
â”‚ ring-green-300 â”‚  Darker green border
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Others (Blue - Neutral)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ bg-blue-50     â”‚  Very light blue background
â”‚ ring-blue-200  â”‚  Light blue border
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Rejection (Gray - De-emphasized)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ bg-gray-100    â”‚  Light gray background
â”‚ ring-gray-300  â”‚  Darker gray border
â”‚ opacity-80     â”‚  Slightly faded
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”Œ API Integration

### Request with Scale
```http
GET /api/search/?q=interview&size=20&scale=3d
```

### Response Structure
```json
{
  "total": 42,
  "hits": [
    {
      "subject": "Google Interview Invitation",
      "from_addr": "recruiter@google.com",
      "label_heuristics": ["interview", "offer"],  â† Sorted by impact
      "score": 12.5,
      "received_at": "2025-10-09T10:00:00Z"
    }
  ]
}
```

## ğŸ§ª Testing Checklist

### Visual Tests
- [ ] Labels appear in impact order (offer first, rejection last)
- [ ] Offer labels are yellow
- [ ] Interview labels are green
- [ ] Rejection labels are gray and faded
- [ ] Other labels are light blue
- [ ] Scoring hint displays at top of results
- [ ] Current scale shown in hint

### Functional Tests
- [ ] Settings dropdown changes recency scale
- [ ] Scale persists across page refreshes (localStorage)
- [ ] Search results reflect new scale
- [ ] Label sorting works with empty/null labels
- [ ] Multiple labels on same email sorted correctly

### API Tests
- [ ] `?scale=3d` parameter accepted
- [ ] `?scale=7d` parameter accepted (default)
- [ ] `?scale=14d` parameter accepted
- [ ] Invalid scale defaults to `7d`
- [ ] Recency decay applied correctly

## ğŸ“ Component Usage

### EmailLabels Component
```tsx
import EmailLabels from '../components/EmailLabels'

// Basic usage
<EmailLabels labels={['interview', 'offer', 'rejection']} />

// With custom className
<EmailLabels 
  labels={email.label_heuristics} 
  className="flex gap-2 justify-end"
/>

// Handles null/undefined
<EmailLabels labels={email.labels || []} />
```

### SearchResultsHeader Component
```tsx
import SearchResultsHeader from '../components/SearchResultsHeader'

// With scoring hint
<SearchResultsHeader 
  query="interview google" 
  total={42} 
  showHint={true} 
/>

// Without hint
<SearchResultsHeader 
  query={searchQuery} 
  total={totalResults} 
/>
```

### Search Preferences
```typescript
import { getRecencyScale, setRecencyScale } from '../state/searchPrefs'

// Get current scale
const scale = getRecencyScale()  // "3d" | "7d" | "14d"

// Set new scale
setRecencyScale("3d")  // Saves to localStorage
```

## ğŸš€ Deployment Notes

### No Breaking Changes
- âœ… All changes are additive
- âœ… Backward compatible with existing code
- âœ… Default behavior unchanged (7d scale)
- âœ… Works without Settings page

### Feature Flags (Optional)
```typescript
// Disable scoring hint if needed
<SearchResultsHeader query={q} total={total} showHint={false} />

// Hide labels if needed
{showLabels && <EmailLabels labels={email.labels} />}
```

### Rollback Plan
1. Remove `scale` param from API calls â†’ defaults to 7d
2. Replace `<EmailLabels>` with old badge rendering
3. Remove `<SearchResultsHeader>` â†’ use plain text

---

**Files to Deploy**:
- Frontend: 4 new + 4 updated
- Backend: 1 updated (search.py)

**Zero Downtime**: Yes, all changes backward compatible

**User Impact**: Improved visual hierarchy and search customization
